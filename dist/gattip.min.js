require=function e(t,r,i){function n(s,o){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return n(r?r:e)},l,l.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){function i(e,t,r){s.instantiateEmitter(this);var i=this,c=e.peripheral(),u=c.gattip(),l={},f={};a.requireUUID("Characteristic","uuid",t),this.uuid=t,r||(r={}),f=r,this.type="c",this.isNotifying=!1,this.gattip=function(){return u},this.peripheral=function(){return c},this.service=function(){return e},this.getAllDescriptors=function(){return l},this.findDescriptor=function(e){return l[e]},this.addDescriptorWithUUID=function(e){var t=new o(i,e);return l[e]=t},this.addDescriptor=function(e){return l[e.uuid]=e},this.hasProperty=function(e){return f[e]&&f[e].enabled},this.setProperty=function(e,t){return f[e]=t},this.allProperties=function(){return f},this.readValue=function(e){var t=a.populateParams(i);u.request(n.kGetCharacteristicValue,t,e,function(t){a.requireFields("Value",t,[n.kValue],[]),i.value=t[n.kValue],u.fulfill(e,i,i.value)})},this.writeValue=function(e,t){a.requireHexValue("writeValue","value",t);var r=a.populateParams(i);r[n.kValue]=t,u.request(n.kWriteCharacteristicValue,r,e,function(r){i.value=t,u.fulfill(e,i)})},this.enableNotifications=function(e,t){a.requireBooleanValue("enableNotifications","isNotifying",t);var r=a.populateParams(i);r[n.kIsNotifying]=t,u.request(n.kSetValueNotification,r,e,function(r){i.isNotifying=t,u.fulfill(e,i,t)})},this.handleValueNotification=function(e){i.value=e[n.kValue],i.emit("valueChange",i,i.value)},this.respondToReadRequest=function(e,t){a.requireHexValue("respondToReadRequest","value",t);var r=a.populateParams(i);r[n.kValue]=t,e.result=n.kGetCharacteristicValue,u.respond(e,r)},this.respondToWriteRequest=function(e){var t=a.populateParams(i);e.result=n.kWriteCharacteristicValue,u.respond(e,t)},this.respondToChangeNotification=function(e,t){var r=a.populateParams(i);a.requireBooleanValue("respondToChangeNotification","value",t),r[n.kIsNotifying]=t,this.isNotifying=t,e.result=n.kSetValueNotification,u.respond(e,r)},this.indicateValueChange=function(e){a.requireHexValue("writeValue","value",e);var t=a.populateParams(i);t[n.kValue]=e,u.sendIndications(n.kSetValueNotification,t)}}var n=e("./lib/constants.js").C,a=e("./lib/message-helper"),s=e("./lib/event-emitter"),o=e("./descriptor").Descriptor;s.makeEmitter(i),t.exports.Characteristic=i},{"./descriptor":2,"./lib/constants.js":6,"./lib/event-emitter":7,"./lib/message-helper":10}],2:[function(e,t,r){function i(e,t){var r=this,i=e.service(),s=i.peripheral(),o=s.gattip();a.requireUUID("Descriptor","uuid",t),this.uuid=t,this.type="d",this.characteristic=function(){return e},this.service=function(){return i},this.peripheral=function(){return s},this.gattip=function(){return o},this.readValue=function(e){var t=a.populateParams(r);o.request(n.kGetDescriptorValue,t,e,function(t){a.requireFields("readValue",t,[n.kValue],[]),r.value=t[n.kValue],o.fulfill(e,r,r.value)})},this.writeValue=function(e,t){var i=a.populateParams(r);a.requireHexValue("writeValue","value",t),o.request(n.kWriteDescriptorValue,i,e,function(i){r.value=t,o.fulfill(e,r)})},this.respondToReadRequest=function(e,t){var i=a.populateParams(r);a.requireHexValue("respondToReadRequest","value",t),i[n.kValue]=t,o.respond(e,i)},this.respondToWriteRequest=function(e){var t=a.populateParams(r);o.respond(e,t)}}var n=e("./lib/constants.js").C,a=e("./lib/message-helper");t.exports.Descriptor=i},{"./lib/constants.js":6,"./lib/message-helper":10}],3:[function(e,t,r){t.exports.ApplicationError=function(e){this.message="Application Error:"+e,Error.captureStackTrace(this,t.exports.ApplicationError)},t.exports.InternalError=function(e){this.message="Application Error:"+e,Error.captureStackTrace(this,t.exports.InternalError)},t.exports.GatewayError=function(e){"object"==typeof e?(this.message="Gateway Error:",e.message&&(this.message+=" "+e.message),e.code&&(this.message+=" Code:"+e.code),0==this.message.length&&(this.message="Unknown Gateway Error")):this.message=e,Error.captureStackTrace(this,t.exports.GatewayError)}},{}],4:[function(e,t,r){function i(e,t){c.instantiateEmitter(this);var r=this,i={};this.isScanning=!1,this.isPoweredOn=function(){return r.state==n.kPoweredOn},this._authenticate=function(t,i,a){var s={};s[n.kDeviceAccessToken]=i,s[n.kGetVersionInfo]=a,e.request(n.kOpen,s,t,function(i){if(i.isAuthenticated!==!0)throw new GatewayError({error:"Auth error"});e.fulfill(t,r)})},this.scan=function(t,i){var a={};i&&("boolean"==typeof i.scanDuplicates&&(a[n.kScanOptionAllowDuplicatesKey]=i.scanDuplicates),"object"==typeof i.services&&(a[n.kServiceUUIDs]=i.services)),e.request(n.kScanForPeripherals,a,t,function(i){r.isScanning=!0,e.fulfill(t,r)})},this.stopScan=function(t){e.request(n.kStopScanning,{},t,function(i){r.isScanning=!1,e.fulfill(t,r)})},this.centralState=function(t){e.request(n.kCentralState,{},t,function(i){r.state=i[n.kState],e.fulfill(t,r)})},this.configure=function(t,i,a){var s={};"undefined"!=typeof i&&(s[n.kShowPowerAlert]=i),"undefined"!=typeof a&&(s[n.kIdentifierKey]=a),e.request(n.kConfigure,{},t,function(i){e.fulfill(t,r)})},this.handleScanIndication=function(i){var o=i[n.kPeripheralUUID];if(!o)throw new s("Peripheral UUID is not availabvle");if(t&&t.uuids)for(var c in t.uuids){var u=t.uuids[c];if(u&&u.length&&u!=o)return}var l=r.getPeripheral(o);l?l._updateFromScanData(i[n.kPeripheralName],i[n.kRSSIkey],i[n.kCBAdvertisementDataTxPowerLevel],i[n.kCBAdvertisementDataIsConnectable],i[n.kCBAdvertisementDataServiceUUIDsKey],i[n.kCBAdvertisementDataManufacturerDataKey],i[n.kCBAdvertisementDataServiceDataKey],i[n.kAdvertisementDataKey],i[n.kScanRecord]):l=r.addPeripheral(new a(e,o,i[n.kPeripheralName],i[n.kRSSIkey],i[n.kCBAdvertisementDataTxPowerLevel],i[n.kCBAdvertisementDataIsConnectable],i[n.kCBAdvertisementDataServiceUUIDsKey],i[n.kCBAdvertisementDataManufacturerDataKey],i[n.kCBAdvertisementDataServiceDataKey],i[n.kAdvertisementDataKey],i[n.kScanRecord])),r.emit("scan",l)},this.addPeripheralWithValues=function(t,n,o,c,u,l,f){if(!t)throw new s("Attempting to add an empty peripheral");var p=r.addPeripheral(new a(e,t,n,o,c,u,l,f));return i[t]=p,p},this.addPeripheral=function(e){if(!e||!e.uuid)throw new s("Attempting to add an empty peripheral");return i[e.uuid]=e,e},this.removePeripheral=function(e){if(!e||!e.uuid)throw new s("Attempting to remove an empty peripheral");delete i[e.uuid]},this.getPeripheral=function(e){return i[e]},this.getPeripheralOrDie=function(e){var t=i[e];if(!t)throw new s("Unable to find peripheral with UUID "+e);return t},this.getObjects=function(e,t,r,n,a){var c={};if(c.peripheral=i[t],c.peripheral){if("p"===e)return c;if(c.service=c.peripheral.findService(r),c.service){if("s"===e)return c;if(c.characteristic=c.service.findCharacteristic(n),c.characteristic){if("c"===e)return c;if(c.descriptor=c.characteristic.findDescriptor(a),c.descriptor){if("d"===e)return c;throw new s('_getObjects: Argument "type" is required')}throw new o('Descriptor "'+a+'" not found in the service table')}throw new o('Characteristic "'+n+'" not found in the service table')}throw new o('Service "'+r+'" not found in the service table')}throw new o("Peripheral with id "+t+" not found")},this.getObjectsFromMessage=function(e,t){if(!t)throw new s("Message parameters are missing");try{return r.getObjects(e,t[n.kPeripheralUUID],t[n.kServiceUUID],t[n.kCharacteristicUUID],t[n.kDescriptorUUID])}catch(e){throw new s(e.message,e.detail)}}}var n=e("./lib/constants").C,a=(e("./lib/message-helper"),e("./peripheral").Peripheral),s=e("./errors").InternalError,o=e("./errors").ApplicationError,c=e("./lib/event-emitter");c.makeEmitter(i),t.exports.Gateway=i},{"./errors":3,"./lib/constants":6,"./lib/event-emitter":7,"./lib/message-helper":10,"./peripheral":14}],5:[function(e,t,r){function i(){function t(e){k.emit("error",e)}function r(e,r,i){try{e&&(r=JSON.parse(r)),i(r)}catch(e){t(e)}}n.instantiateEmitter(this),this.traceEnabled=!1;var i,h,d,v,m,k=this;this.getGateway=function(){return m},this.traceMessage=function(e,t){k.traceEnabled&&"object"==typeof e&&(e=JSON.stringify(e))},this.getServerMessageHandler=function(){return v||t(new o("Server Message Handler is not Ready")),v},this.fulfill=function(e,t,r,i,n,a){"object"==typeof e&&"function"==typeof e.fulfill?e.fulfill(t,r,i,n,a):"function"==typeof e&&e(t,r,i,n,a)},this.reject=function(e,r){"object"==typeof e&&"function"==typeof e.reject?e.reject(r):t(r)},this.open=function(n){function g(e){e.isServer?(h.on("request",function(e){k.traceMessage(e,"<req:"),r(!1,e,v.processMessage)}),h.on("indication",function(e){t(new s("Received an indication on a server stream:"+JSON.stringify(e)))}),m=y,k.emit("ready",y)):e.isPassThrough?I():y.configure(function(){y.centralState(function(){if(y.isPoweredOn())y.isPoweredOn()&&I();else{k.emit("state","Bluetooth not power on");var e=setInterval(function(){y.centralState(function(){y.isPoweredOn()&&(clearInterval(e),I())})},500)}})})}function I(){h.on("indication",function(e){k.traceMessage(e,"<ind:"),r(!1,e,d.handleIndication)}),h.on("request",function(e){t(new a("Received a request on a client stream:"+JSON.stringify(e)))}),m=y,k.emit("ready",y)}function E(e){e.token?y._authenticate(function(){g(e)},e.token,e.version):g(e)}var y=new l(this,n.scanFilters);if(h=new u(this),d=new c(this,y),v=new f(this,y),n.trace===!0&&(k.traceEnabled=!0),n.url){var S;"object"==typeof window?(S=window.WebSocket,i=new S(n.url)):(S=e("websocket").w3cwebsocket,i=new S(n.url,(void 0),(void 0),(void 0),(void 0),p)),i.onopen=function(){E(n)},i.onclose=function(e){k.emit("onclose",e)},i.onerror=function(e){k.emit("onerror",e)}}else{if(!n.stream)throw new s("URL or stream implementing a socket interface is required");i=n.stream,E(n)}i.onmessage=function(e){r(!0,e.data,h.onMessageReceived)},h.on("response",function(e,t){k.traceMessage(e,"<rsp:");try{e.error?k.reject(t.cb,new o(e.error)):t.handler?t.handler(e.params):k.fulfill(t.cb)}catch(e){k.reject(t.cb,e)}}),h.on("error",function(e){k.emit("error",e)})},this.close=function(){i&&i.close()},this.request=function(e,t,r,n){var a=d.createUserContext(e,t,r,n),s=a.originalMessage;h.register(s,a),k.traceMessage(s,">req:"),i.send(JSON.stringify(s))},this.respond=function(e,t){var r=d.wrapResponse(e,t);k.traceMessage(r,">rsp:"),i.send(JSON.stringify(r))},this.sendIndications=function(e,t){var r={params:t,jsonrpc:"2.0"};r.result=e,r.params=t,k.traceMessage(r,">rsp:"),i.send(JSON.stringify(r))},this.sendError=function(e){e.jsonrpc="2.0",k.traceMessage(e,">rsp:"),i.send(JSON.stringify(e))}}var n=e("./lib/event-emitter"),a=e("./errors").InternalError,s=e("./errors").ApplicationError,o=e("./errors").GatewayError,c=e("./lib/message-handler").MessageHandler,u=e("./lib/message-processor").MessageProcessor,l=e("./gateway").Gateway,f=(e("./lib/message-helper"),e("./lib/server-message-handler").ServerMessageHandler),p={keepalive:!0,dropConnectionOnKeepaliveTimeout:!0,keepaliveInterval:1e4,keepaliveGracePeriod:1e4};n.makeEmitter(i),t.exports.GATTIP=i},{"./errors":3,"./gateway":4,"./lib/event-emitter":7,"./lib/message-handler":9,"./lib/message-helper":10,"./lib/message-processor":11,"./lib/server-message-handler":12,websocket:16}],6:[function(e,t,r){var i={DEFAULT_MESSAGE_TIMEOUT_MS:61e3,MAX_PENDING_MESSAGES:200,NUM_CONNECT_ATTEMPTS:3,kMessageId:"id",kSessionId:"session_id",kAuthenticate:"aut",kOpen:"opn",kDeviceAccessToken:"dat",kGetVersionInfo:"vif",kError:"error",kCode:"code",kMessageField:"message",kMethod:"method",kResult:"result",kIdField:"id",kConfigure:"aa",kScanForPeripherals:"ab",kStopScanning:"ac",kConnect:"ad",kDisconnect:"ae",kCentralState:"af",kGetConnectedPeripherals:"ag",kGetPerhipheralsWithServices:"ah",kGetPerhipheralsWithIdentifiers:"ai",kGetServices:"ak",kGetIncludedServices:"al",kGetCharacteristics:"am",kGetDescriptors:"an",kGetCharacteristicValue:"ao",kGetDescriptorValue:"ap",kWriteCharacteristicValue:"aq",kWriteDescriptorValue:"ar",kSetValueNotification:"as",kGetPeripheralState:"at",kGetRSSI:"au",kInvalidatedServices:"av",kPeripheralNameUpdate:"aw",kMessage:"zz",kCentralUUID:"ba",kPeripheralUUID:"bb",kPeripheralName:"bc",kPeripheralUUIDs:"bd",kServiceUUID:"be",kServiceUUIDs:"bf",kPeripherals:"bg",kIncludedServiceUUIDs:"bh",kCharacteristicUUID:"bi",kCharacteristicUUIDs:"bj",kDescriptorUUID:"bk",kServices:"bl",kCharacteristics:"bm",kDescriptors:"bn",kProperties:"bo",kValue:"bp",kState:"bq",kStateInfo:"br",kStateField:"bs",kWriteType:"bt",kRSSIkey:"bu",kIsPrimaryKey:"bv",kIsBroadcasted:"bw",kIsNotifying:"bx",kShowPowerAlert:"by",kIdentifierKey:"bz",kScanOptionAllowDuplicatesKey:"b0",kScanOptionSolicitedServiceUUIDs:"b1",kAdvertisementDataKey:"b2",kCBAdvertisementDataManufacturerDataKey:"mfr",kCBAdvertisementDataServiceUUIDsKey:"suu",kCBAdvertisementDataServiceDataKey:"sdt",kCBAdvertisementDataOverflowServiceUUIDsKey:"b6",kCBAdvertisementDataSolicitedServiceUUIDsKey:"b7",kCBAdvertisementDataIsConnectable:"cbl",kCBAdvertisementDataTxPowerLevel:"txp",kPeripheralBtAddress:"c1",kRawAdvertisementData:"c2",kScanRecord:"c3",kCBCentralManagerRestoredStatePeripheralsKey:"da",kCBCentralManagerRestoredStateScanServicesKey:"db",kWriteWithResponse:"cc",kWriteWithoutResponse:"cd",kNotifyOnConnection:"ce",kNotifyOnDisconnection:"cf",kNotifyOnNotification:"cg",kDisconnected:"ch",kConnecting:"ci",kConnected:"cj",kUnknown:"ck",kResetting:"cl",kUnsupported:"cm",kUnauthorized:"cn",kPoweredOff:"co",kPoweredOn:"cp",kErrorPeripheralNotFound:"-32001",kErrorServiceNotFound:"-32002",kErrorCharacteristicNotFound:"-32003",kErrorDescriptorNotFound:"-32004",kErrorPeripheralStateIsNotValid:"-32005",kErrorNoServiceSpecified:"-32006",kErrorNoPeripheralIdentiferSpecified:"-32007",kErrorStateRestorationNotValid:"-32008",kInvalidRequest:"-32600",kMethodNotFound:"-32601",kInvalidParams:"-32602",kError32603:"-32603",kParseError:"-32700",kGAP_ADTYPE_FLAGS:"01",kGAP_ADTYPE_INCOMPLETE_16BIT_SERVICEUUID:"02",kGAP_ADTYPE_COMPLETE_16BIT_SERVICEUUID:"03",kGAP_ADTYPE_INCOMPLETE_32BIT_SERVICEUUID:"04",kGAP_ADTYPE_COMPLETE_32BIT_SERVICEUUID:"05",kGAP_ADTYPE_INCOMPLETE_128BIT_SERVICEUUID:"06",kGAP_ADTYPE_COMPLETE_128BIT_SERVICEUUID:"07",kGAP_ADTYPE_POWER_LEVEL:"0A",kGAP_ADTYPE_MANUFACTURER_SPECIFIC:"FF",kGAP_ADTYPE_16BIT_SERVICE_DATA:"16",id:1,authenticate:"authenticate",AllProperties:["Broadcast","Read","WriteWithoutResponse","Write","Notify","Indicate","AuthenticatedSignedWrites","ExtendedProperties","NotifyEncryptionRequired","IndicateEncryptionRequired"]};t.exports.C=i},{}],7:[function(e,t,r){var i=e("events"),n=e("util");t.exports.makeEmitter=function(e){n.inherits(e,i)},t.exports.instantiateEmitter=function(e){i.call(e)}},{events:17,util:21}],8:[function(e,t,r){function i(e,t){var r=parseInt(t[0],16);parseInt(t[2],16)>=1?e.connectable="true":e.connectable="false",t.splice(0,r+1)}function n(e,t){var r=parseInt(t[0],16);e.txPowerLevel=parseInt(t[2]),t.splice(0,r+1)}function a(e,t){var r=parseInt(t[0],16);if(r>2){for(var i=t[3]+t[2],n="",a=4;a<=r;a++)n+=t[a];e.manufacturerData[i]=n}t.splice(0,r+1)}function s(e,t){for(var r=parseInt(t[0],16),i="",n=r;n>=2;n--)i+=t[n];e.serviceUUIDs=i,t.splice(0,r+1)}function o(e,t){for(var r=parseInt(t[0],16),i="",n=r;n>=2;n--)i+=t[n],14!=n&&12!=n&&10!=n&&8!=n||(i+="-");e.serviceUUIDs=i,t.splice(0,r+1)}function c(e,t){for(var r=parseInt(t[0],16),i="",n=3;n>=2;n--)i+=t[n];"FEAA"==i&&(0===parseInt(t[4],16)?u(e):16==parseInt(t[4],16)?l(e):32==parseInt(t[4],16)&&f(e)),t.splice(0,r+1)}function u(e,t){e.frameType="UID",e.nameSpace="",e.instanceID="",e.txPowerLevel=parseInt(t[5],16);for(var r=6;r<16;r++)e.nameSpace+=t[r];for(var i=16;i<22;i++)e.instanceID+=t[i];e.reserved=t[22],e.reserved+=t[23]}function l(e,t){e.frameType="URL",e.txPowerLevel=parseInt(t[5]);for(var r in p.AllProtocols)t[6]==r&&(e.url=p.AllProtocols[r]);for(var i=7;i<advArrayLength;i++)e.url+=String.fromCharCode(parseInt(t[i],16));for(var n in p.AllDomains)t[advArrayLength]==n&&(e.url+=p.AllDomains[n])}function f(e,t){e.frameType="TLM",e.advPacketCount="",e.timeInterval="",e.batteryVoltage="",e.eddyVersion=parseInt(t[5],16);for(var r=6;r<8;r++)e.batteryVoltage+=t[r];e.batteryVoltage=parseInt(e.batteryVoltage,16),e.temperature=Math.ceil(parseInt(t[8],16)),e.temperature+=".";var i=Math.ceil(1/256*parseInt(t[9],16));i.length>2?e.temperature+=i.toString().substring(0,2):e.temperature+=i;for(var n=10;n<14;n++)e.advPacketCount+=t[n];e.advPacketCount=parseInt(e.advPacketCount,16);for(var a=14;a<18;a++)e.timeInterval+=t[a];if(e.timeInterval=Math.ceil(.1*parseInt(e.timeInterval,16)),e.timePeriod="",e.timeInterval>=60){var s=Math.floor(e.timeInterval/86400);s>0&&(e.timePeriod+=s<10?s+"day ":s+"days ",e.timeInterval-=24*s*60*60);var o=Math.floor(e.timeInterval/3600);o>0?(e.timePeriod+=o<10?"0"+o+":":o+":",e.timeInterval-=60*o*60):e.timePeriod+="00:";var c=Math.floor(e.timeInterval/60);c>0?(e.timePeriod+=c<10?"0"+c+":":c+":",e.timeInterval-=60*c,e.timePeriod+=e.timeInterval<10?"0"+e.timeInterval:e.timeInterval,e.timePeriod+=" secs",e.timeInterval=0):(e.timePeriod+="00:"+e.timeInterval,e.timeInterval=0)}else e.timeInterval>0&&e.timeInterval<60&&(e.timePeriod+=e.timeInterval<10?"00:00:0"+e.timeInterval:"00:00:"+e.timeInterval,e.timePeriod+=" secs")}var p=e("./constants").C;t.exports.parseAdvArray=function(e,t){e.advdata||(e.advdata={});var r=e.advdata;if(r.manufacturerData||(r.manufacturerData={}),r.serviceUUIDs||(r.serviceUUIDs=[]),!t)return[];var u=[];if(t.length%2===0)for(var l=0;l<t.length;l+=2)u[l/2]=t.charAt(l)+t.charAt(l+1);else for(var f=0;f<t.length;f++)u[f]=t.charAt(2*f)+t.charAt(2*f+1);for(;;){var h=u[1];if(h==p.kGAP_ADTYPE_FLAGS)i(r,u);else if(h==p.kGAP_ADTYPE_POWER_LEVEL)n(r,u);else if(h==p.kGAP_ADTYPE_INCOMPLETE_16BIT_SERVICEUUID||h==p.kGAP_ADTYPE_COMPLETE_16BIT_SERVICEUUID)s(r,u);else if(h==p.kGAP_ADTYPE_INCOMPLETE_32BIT_SERVICEUUID||h==p.kGAP_ADTYPE_COMPLETE_32BIT_SERVICEUUID)s(r,u);else if(h==p.kGAP_ADTYPE_INCOMPLETE_128BIT_SERVICEUUID||h==p.kGAP_ADTYPE_COMPLETE_128BIT_SERVICEUUID)o(r,u);else if(h==p.kGAP_ADTYPE_MANUFACTURER_SPECIFIC)a(r,u);else if(h==p.kGAP_ADTYPE_16BIT_SERVICE_DATA)c(r,u);else if("00"==h)u.splice(0,1);else{var d=parseInt(u[0],16);u.splice(0,d+1)}if(0===u.length)break}}},{"./constants":6}],9:[function(e,t,r){var i=e("./constants").C,n=e("./message-helper"),a=e("./../errors").InternalError,s=e("./../errors").ApplicationError;t.exports.MessageHandler=function(e,t){this.createUserContext=function(e,t,r,i){var n={method:e,params:t,jsonrpc:"2.0"};return{originalMessage:n,cb:r,handler:i}},this.wrapResponse=function(e,t){var r={params:t,jsonrpc:"2.0"};return n.requireAndPopulateFieldsFromCookie("wrapResponse",e,r),r},this.handleIndication=function(e){if(e.error)throw new s(JSON.stringify(e));var r=e.params;switch(e.result){case i.kScanForPeripherals:t.handleScanIndication(r);break;case i.kDisconnect:!function(){n.requireFields("Disconnect indication",r,[i.kPeripheralUUID]);var e=t.getPeripheral(r[i.kPeripheralUUID]);e&&e.handleDisconnectIndication(e)}();break;case i.kSetValueNotification:!function(){n.requireFields("Disconnect indication",r,[i.kPeripheralUUID]);var a=t.getPeripheral(r[i.kPeripheralUUID]);if(a){n.requireFields("Value notification",r,[i.kPeripheralUUID,i.kServiceUUID,i.kCharacteristicUUID,i.kValue]);var s=t.getObjectsFromMessage("c",e.params);s.characteristic.handleValueNotification(r)}}();break;default:!function(){throw new a("Unknown indication received from the gateway:",JSON.stringify(e))}()}}}},{"./../errors":3,"./constants":6,"./message-helper":10}],10:[function(e,t,r){function i(e){var t="";if("object"==typeof e){if(Array.isArray(e)){for(var r in e)0!=r&&(t+=" ,"),t+=e[r]}for(var n in e)if(e.hasOwnProperty(n)){var s=e[n],o=a[n];o||(o=n),t+="object"==typeof s?Array.isArray(s)?" "+o+":["+i(s)+"]":" "+o+":{"+i(s)+"}":" "+o+"="+s}}return t}var n=e("./constants").C,a={},s=e("./../errors").InternalError,o=e("./../errors").ApplicationError;for(var c in n){var u=n[c];0==c.indexOf("k")&&(c=c.substring(1,c.length),a[u]=c)}t.exports.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return JSON.stringify(e)===JSON.stringify({})},t.exports.arrayAsHex=function(e,t){var r=t?"0x":"";for(var i in e){var n=(255&e[i]).toString(16);1==n.length&&(n="0"+n),r+=n}return r},t.exports.toString=function(e){return i(e.params).trim()},t.exports.requireAndAssignParameters=function(e,r,i,n){t.exports.requireFields(e+" call parameters ",r,i,n)},t.exports.requireBooleanValue=function(e,t,r){if("boolean"!=typeof r)throw new o(e+" missing parameter "+t)},t.exports.requireHexValue=function(e,t,r){if("string"!=typeof r)throw new o(e+" missing parameter "+t);if(r.length<2||r.length%2!=0||!/^[0-9a-fA-F]+$/.test(r))throw new o(e+" value "+t+" is not a valid hex string")},t.exports.requireUUID=function(e,t,r){if("string"!=typeof r)throw new o(e+" missing parameter "+t);if(r.length<4||!/^[0-9A-F-]+$/.test(r))throw new o(e+" value "+t+" is not a valid UUID")},t.exports.requireHexValues=function(e,t,r){var i=[];if(!Array.isArray(t)||!Array.isArray(r))throw new s("Illegal use of requireHexValues");for(var n in t){var a=t[n],c=r[n];("string"!=typeof c||c.length<2||c.length%2!=0||!/^#[0-9A-F]$/i.test(c))&&i.push(a)}if(i)throw new o(e+" missing parameters "+i)},t.exports.requireFields=function(e,t,r,i){var n=[];if(i||(i={}),!t)throw new s(e+"Object is undefined");for(var a in r){var o=r[a];void 0==typeof t[o]&&(void 0==typeof i[a]?n.push(r):t[o]=i[a])}if(n.length)throw new s(e+" missing "+n)},t.exports.requireAndPopulateFieldsFromCookie=function(e,t,r){if(!t)throw new o('Error: "'+e+" is missing the cookie");if(!t.original.id)throw new o('Error: "'+e+" is missing the cookie ID");if(!t.original.session_id)throw new o('Error: "'+e+" is missing the cookie session ID");if(!t.original.method)throw new o('Error: "'+e+" is missing the cookie request");r[n.kMessageId]=t.original.id,r[n.kSessionId]=t.original.session_id,r.result=t.result},t.exports.populateParams=function(e,t){function r(e,r){u--;var i=r.uuid;if(!i)throw new s('UUID for object of type "'+r.type+'" is missing');t[e]=i}if(t||(t={}),!e)throw new s("populateParams: service object is undefined");var i,a,o,c,u=23132;switch(e.type){case"d":u=4,c=e;break;case"c":u=3,o=e;break;case"s":u=2,a=e;break;case"p":u=1,i=e;break;default:throw new s('type must be one of: "s", "c" or "d"')}if(c&&(r(n.kDescriptorUUID,c),o=c.characteristic()),o&&(r(n.kCharacteristicUUID,o),a=o.service()),a&&(r(n.kServiceUUID,a),i=o.peripheral()),i&&r(n.kPeripheralUUID,i),0!=u)throw new s("Expected "+u+" more parts when constructing params of "+e.type);return t}},{"./../errors":3,"./constants":6}],11:[function(e,t,r){function i(e,t,r,i){this.msg=t,this.userContext=r,"undefined"==typeof t.id&&(t.id=Number(c++).toString()),this.id=t.id,i||(i=s.DEFAULT_MESSAGE_TIMEOUT_MS);var n=this;this.timeout=setTimeout(function(){delete n.timeout,e.emit("error",new o("Timed out : "+JSON.stringify(t)),n.userContext.cb)},i)}function n(){a.instantiateEmitter(this);var e=this,t={};this.register=function(r,n,a){if(Object.keys(t).length>s.MAX_PENDING_MESSAGES)throw new o("Message queue is full",r);var c=new i(e,r,n,a);return t[c.id]=c,c.msg},this.hasMessage=function(e){var r=t[""+e];return!!r},this.onMessageReceived=function(r){var i;if(r.params&&r.params.id&&(r.id=r.params.id),r.id&&(i=t[""+r.id]),!i){if(r.id)return r.result==s.kScanForPeripherals&&r.params&&r.params.bb?(l||(l=!0),void e.emit("indication",r)):void e.emit("request",r);if(r.result!=s.kMessage)return void e.emit("indication",r);u||(u=!0),r.id="1",i=t[1]}i.timeout&&clearTimeout(i.timeout),delete t[r.id],e.emit("response",r,i.userContext,i.msg)}}var a=e("./event-emitter"),s=e("./constants").C,o=e("./../errors").ApplicationError,c=1,u=!1,l=!1;a.makeEmitter(n),t.exports.MessageProcessor=n},{"./../errors":3,"./constants":6,"./event-emitter":7}],12:[function(e,t,r){function i(e,t){a.instantiateEmitter(this);var r=this;this.processMessage=function(e){function i(i){var a=l[n.kPeripheralUUID],s={};if(s.peripheral=t.getPeripheral(a),s.peripheral&&s.peripheral.uuid){if("p"===i)return s;var o=l[n.kServiceUUID];if(s.service=s.peripheral.findService(o),s.service&&s.service.uuid){if("s"===i)return s;var c=l[n.kCharacteristicUUID];if(s.characteristic=s.service.findCharacteristic(c),s.characteristic&&s.characteristic.uuid){if("c"===i)return s;var u=l[n.kDescriptorUUID];if(s.descriptor=s.characteristic.findDescriptor(u),s.descriptor&&s.descriptor.uuid)return s;throw r.sendErrorResponse(e.method,n.kErrorDescriptorNotFound,"Descriptor not found in the service database"),new Error("Descriptor not found")}throw r.sendErrorResponse(e.method,n.kErrorCharacteristicNotFound,"Characteristic not found in the service database"),new Error("Characteristic not found")}throw r.sendErrorResponse(e.method,n.kErrorServiceNotFound,"Service not found in the service database"),new Error("Service not found")}throw r.sendErrorResponse(e.method,n.kErrorPeripheralNotFound,"Peripheral not found in the service database"),new Error("Peripheral not found")}var a;if("undefined"!=typeof e&&e&&!e.error){if(e.result&&(e.result==n.kMessage||e.result==n.kAuthenticate)){var s=!1;return e.error||"object"!=typeof e.params||e.params[n.kAuthenticate]!==!0||(s=!0),void r.emit("authenticated",s)}if(e.method&&e.method==n.kAuthenticate){var o={};o[n.kAuthenticate]=!0;var c={};return c.result=n.kAuthenticate,c.params=o,c[n.kIdField]=e[n.kIdField],c=JSON.stringify(c),void r.send(c)}var u={original:e},l=e.params;switch(e.method){case n.kConfigure:r.emit("configure",u,l[n.kShowPowerAlert],l[n.kIdentifierKey]);break;case n.kScanForPeripherals:r.emit("scan",u,l[n.kScanOptionAllowDuplicatesKey],l[n.kServiceUUIDs]);break;case n.kStopScanning:r.emit("stopScan",u);break;case n.kCentralState:r.emit("getCentralState",u);break;case n.kConnect:try{a=i("p"),r.emit("connect",u,a.peripheral.uuid)}catch(e){}break;case n.kDisconnect:try{a=i("p"),r.emit("disconnect",u,a.peripheral.uuid)}catch(e){}break;case n.kGetCharacteristicValue:try{a=i("c",u),r.emit("readCharacteristic",u,a.peripheral.uuid,a.service.uuid,a.characteristic.uuid)}catch(e){}break;case n.kWriteCharacteristicValue:try{a=i("c",u),r.emit("writeCharacteristic",u,a.peripheral.uuid,a.service.uuid,a.characteristic.uuid,e.params[n.kValue])}catch(e){}break;case n.kSetValueNotification:try{a=i("c",u),r.emit("enableNotifications",u,a.peripheral.uuid,a.service.uuid,a.characteristic.uuid,e.params[n.kIsNotifying])}catch(e){}break;case n.kGetDescriptorValue:try{a=i("d",u),r.emit("readDescriptor",u,a.peripheral.uuid,a.service.uuid,a.characteristic.uuid,a.descriptor.uuid)}catch(e){}break;case n.kWriteDescriptorValue:try{a=i("d",u),r.emit("writeDescriptor",u,a.peripheral.uuid,a.service.uuid,a.characteristic.uuid,a.descriptor.uuid,e.params[n.kValue])}catch(e){}break;default:return void r.sendErrorResponse(u,e.method,n.kInvalidRequest,"Request not handled by server")}}},r.sendErrorResponse=function(t,r,i,a){var s={},o={};o[n.kCode]=i,o[n.kMessageField]=a,s[n.kError]=o,s.result=r,t&&t.original&&(s[n.kMessageId]=t.original.id,s[n.kSessionId]=t.original.session_id),e.sendError(s)},r.configureResponse=function(t){t.result=n.kConfigure,e.respond(t,{})},r.centralStateResponse=function(t,r){var i={};i[n.kState]=r,t.result=n.kCentralState,e.respond(t,i)},r.stopScanResponse=function(t){t.result=n.kStopScanning,e.respond(t,{})},r.disconnectResponse=function(t,r){var i={};i[n.kPeripheralUUID]=r.uuid,i[n.kPeripheralName]=r.name,null!=t?e.respond(t,i):e.sendIndications(n.kDisconnect,i)},r.scanResponse=function(t,r,i,a,o,c,u,l,f){if(t)return t.result=n.kScanForPeripherals,void e.respond(t,{});var p,h,d={};if(!s.isEmpty(u)){p={};for(var v in u){var m=v.toUpperCase();p[m]=s.arrayAsHex(u[v]).toUpperCase()}}if(!s.isEmpty(l)){h={};for(var k in l){var g=k.toUpperCase();h[g]=s.arrayAsHex(l[k]).toUpperCase()}}d[n.kPeripheralName]=i,d[n.kPeripheralUUID]=r,d[n.kRSSIkey]=a,d[n.kCBAdvertisementDataTxPowerLevel]=o,d[n.kCBAdvertisementDataIsConnectable]=f,d[n.kCBAdvertisementDataServiceUUIDsKey]=c&&c.length>0?c:void 0,d[n.kCBAdvertisementDataManufacturerDataKey]=p,d[n.kCBAdvertisementDataServiceDataKey]=h,e.sendIndications(n.kScanForPeripherals,d)},r.addPeripheral=function(e,t,i,n,a){var s=new Peripheral(this,e,t,i,n,a);return r.peripherals[s.uuid]=s,s}}var n=e("./constants.js").C,a=e("./event-emitter"),s=e("./message-helper");this.GATM_SECURITY_PROPERTIES_NO_SECURITY=0,this.GATM_SECURITY_PROPERTIES_UNAUTHENTICATED_ENCRYPTION_WRITE=1,this.GATM_SECURITY_PROPERTIES_AUTHENTICATED_ENCRYPTION_WRITE=2,this.GATM_SECURITY_PROPERTIES_UNAUTHENTICATED_ENCRYPTION_READ=4,this.GATM_SECURITY_PROPERTIES_AUTHENTICATED_ENCRYPTION_READ=8,this.GATM_SECURITY_PROPERTIES_UNAUTHENTICATED_SIGNED_WRITES=16,this.GATM_SECURITY_PROPERTIES_AUTHENTICATED_SIGNED_WRITES=32,this.GATM_CHARACTERISTIC_PROPERTIES_BROADCAST=1,this.GATM_CHARACTERISTIC_PROPERTIES_READ=2,this.GATM_CHARACTERISTIC_PROPERTIES_WRITE_WO_RESP=4,this.GATM_CHARACTERISTIC_PROPERTIES_WRITE=8,this.GATM_CHARACTERISTIC_PROPERTIES_NOTIFY=16,this.GATM_CHARACTERISTIC_PROPERTIES_INDICATE=32,this.GATM_CHARACTERISTIC_PROPERTIES_AUTHENTICATED_SIGNED_WRITES=64,this.GATM_CHARACTERISTIC_PROPERTIES_EXT_PROPERTIES=128,this.GATM_DESCRIPTOR_PROPERTIES_READ=1,this.GATM_DESCRIPTOR_PROPERTIES_WRITE=2,a.makeEmitter(i),t.exports.ServerMessageHandler=i},{"./constants.js":6,"./event-emitter":7,"./message-helper":10}],13:[function(e,t,r){function i(e,t){var r=t[c.kDescriptorUUID],i=e.findDescriptor(r);i||(i=new f(e,r),e.addDescriptor(i)),i.value=t[c.kValue]}function n(e,t){var r=t[c.kCharacteristicUUID],n=e.findCharacteristic(r);n||(n=new l(e,r),e.addCharacteristic(n)),n.value=t[c.kValue];var a=t[c.kProperties];if("object"==typeof a)for(var s in a)n.setProperty(s,{enabled:a[s].enabled,name:a[s].name});else for(var o in c.AllProperties)n.setProperty([c.AllProperties[o]],{enabled:a>>o&1,name:c.AllProperties[o]});n.isNotifying=!1;var u=t[c.kDescriptors];if(u)for(var f in u){var p=u[f];i(n,p)}}function a(e,t){var r=t[c.kServiceUUID],i=e.findService(r);i||(i=new u(e,r),e.addService(i));var a=t[c.kCharacteristics];if(a)for(var s in a){var o=a[s];n(i,o)}}function s(e){var t={};if(e&&e.getAllDescriptors())for(var r in e.getAllDescriptors()){var i={};i[c.kDescriptorUUID]=r,i[c.kValue]=e.findDescriptor(r).value,i[c.kProperties]=e.findDescriptor(r).properties,i[c.kIsNotifying]=e.findDescriptor(r).isNotifying,t[r]=i}return t}function o(e){var t={};if(e&&e.getAllCharacteristics())for(var r in e.getAllCharacteristics()){var i={};i[c.kCharacteristicUUID]=r,i[c.kValue]=e.findCharacteristic(r).value,i[c.kProperties]=e.findCharacteristic(r).allProperties(),i[c.kIsNotifying]=e.findCharacteristic(r).isNotifying,i[c.kDescriptors]=s(e.findCharacteristic(r)),t[r]=i}return t}var c=e("./constants").C,u=e("./../service").Service,l=e("./../characteristic").Characteristic,f=e("./../descriptor").Descriptor;t.exports.parseServiceRecord=function(e,t){var r=t[c.kServices];if(r)for(var i in r){var n=r[i];a(e,n)}},t.exports.getServiceJsonFromPeripheralObject=function(e){var t={};if(e&&e.getAllServices())for(var r in e.getAllServices()){var i={};i[c.kServiceUUID]=r,i[c.kIsPrimaryKey]=e.findService(r).isPrimary,i[c.kCharacteristics]=o(e.findService(r)),t[r]=i}return t}},{"./../characteristic":1,"./../descriptor":2,"./../service":15,"./constants":6}],14:[function(e,t,r){function i(e,t){return e.indexOf(t)==-1&&(e.push(t),!0)}function n(e,t,r,n,f,p){c.instantiateEmitter(this);var h=this;this.type="p",this.uuid=t,this.isConnected=!1;var d={},v={},m={},k=[];this._updateFromScanData=function(e,t,r,n,a,c,u,l,f){this.name=e,this.rssi=t,this.txPowerLevel=r,this.connectable=n;if(c)for(var p in c){var d=p.toUpperCase();v[d]=c[p].toUpperCase()}if(u)for(var g in u)m[g]=u[g];if(a)for(var I=0;I<a.length;I++)i(k,a[I]);
if(l){if(o.parseAdvArray(h,l.c2),h.advdata.connectable&&(h.connectable="true"===h.advdata.connectable),h.advdata.txPowerLevel&&(this.txPowerLevel=h.advdata.txPowerLevel),h.advdata.manufacturerData&&!s.isEmpty(h.advdata.manufacturerData))for(var E in h.advdata.manufacturerData){var y=E.toUpperCase();v[y]=h.advdata.manufacturerData[E].toUpperCase()}h.advdata.serviceUUIDs&&h.advdata.serviceUUIDs.length>0&&i(k,h.advdata.serviceUUIDs)}},this.findService=function(e){return d[e]},this.getMfrData=function(e){return v[e]},this.getSvcData=function(e){return m[e]},this.hasAdvertisedServiceUUID=function(e){return k.indexOf(e)>=0},this.getAllServices=function(){return d},this.getAllMfrData=function(){return v},this.getAllSvcData=function(){return m},this.getAllAdvertisedServiceUUIDs=function(){return k},this.addServiceWithUUID=function(e){var t=new l(h,e);return d[e]=t},this.addService=function(e){return d[e.uuid]=e},this.gattip=function(){return e},this.connectOnce=function(t){var r=s.populateParams(h);e.request(a.kConnect,r,t,function(r){u.parseServiceRecord(h,r),h.isConnected=!0,e.fulfill(t,h)})},this.connect=function(t,r){function i(r){s++,s<=a.NUM_CONNECT_ATTEMPTS?h.connectOnce({fulfill:n,reject:i}):e.reject(t,r)}var n="object"==typeof t?t.fulfill:t,s=0;r&&"number"==typeof r.numConnectAttempts&&(s=r.numConnectAttempts),i()},this.disconnect=function(t){var r=s.populateParams(h);e.request(a.kDisconnect,r,t,function(r){h.isConnected=!1,e.fulfill(t,h)})},this.respondToConnectRequest=function(t){var r={};r[a.kPeripheralUUID]=this.uuid,r[a.kPeripheralName]=this.name;var i;i=u.getServiceJsonFromPeripheralObject(this),r[a.kServices]=i,t.result=a.kConnect,e.respond(t,r)},this.handleDisconnectIndication=function(){h.isConnected=!1,h.emit("disconnected",h)},this._updateFromScanData(r,n,f,p)}var a=e("./lib/constants.js").C,s=e("./lib/message-helper"),o=e("./lib/message-advdata-parser"),c=e("./lib/event-emitter"),u=e("./lib/service-table"),l=e("./service").Service;c.makeEmitter(n),t.exports.Peripheral=n},{"./lib/constants.js":6,"./lib/event-emitter":7,"./lib/message-advdata-parser":8,"./lib/message-helper":10,"./lib/service-table":13,"./service":15}],15:[function(e,t,r){function i(e,t){var r=this,i=e.gattip(),s={};n.requireUUID("Service","uuid",t),this.uuid=t,this.type="s",this.isPrimary=!0,this.peripheral=function(){return e},this.gattip=function(){return i},this.getAllCharacteristics=function(){return s},this.findCharacteristic=function(e){return s[e]},this.addCharacteristicWithUUID=function(e,t){var i=new a(r,e,t);return s[e]=i},this.addCharacteristic=function(e){s[e.uuid]=e}}var n=e("./lib/message-helper"),a=e("./characteristic").Characteristic;r.Service=i},{"./characteristic":1,"./lib/message-helper":10}],16:[function(e,t,r){},{}],17:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function a(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,a);return!0},i.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(o=a;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){i=o;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],18:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],19:[function(e,t,r){function i(){l&&o&&(l=!1,o.length?u=o.concat(u):f=-1,u.length&&n())}function n(){if(!l){var e=setTimeout(i);l=!0;for(var t=u.length;t;){for(o=u,u=[];++f<t;)o&&o[f].run();f=-1,t=u.length}o=null,l=!1,clearTimeout(e)}}function a(e,t){this.fun=e,this.array=t}function s(){}var o,c=t.exports={},u=[],l=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new a(e,t)),1!==u.length||l||setTimeout(n,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=s,c.addListener=s,c.once=s,c.off=s,c.removeListener=s,c.removeAllListeners=s,c.emit=s,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],20:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],21:[function(e,t,r){(function(t,i){function n(e,t){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(t)?i.showHidden=t:t&&r._extend(i,t),y(i.showHidden)&&(i.showHidden=!1),y(i.depth)&&(i.depth=2),y(i.colors)&&(i.colors=!1),y(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=a),c(i,e,i.depth)}function a(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function s(e,t){return e}function o(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function c(e,t,i){if(e.customInspect&&t&&C(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(i,e);return I(n)||(n=c(e,n,i)),n}var a=u(e,t);if(a)return a;var s=Object.keys(t),v=o(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),A(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(C(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(S(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(D(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return l(t)}var k="",g=!1,E=["{","}"];if(d(t)&&(g=!0,E=["[","]"]),C(t)){var y=t.name?": "+t.name:"";k=" [Function"+y+"]"}if(S(t)&&(k=" "+RegExp.prototype.toString.call(t)),D(t)&&(k=" "+Date.prototype.toUTCString.call(t)),A(t)&&(k=" "+l(t)),0===s.length&&(!g||0==t.length))return E[0]+k+E[1];if(i<0)return S(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var P;return P=g?f(e,t,i,v,s):s.map(function(r){return p(e,t,i,v,r,g)}),e.seen.pop(),h(P,k,E)}function u(e,t){if(y(t))return e.stylize("undefined","undefined");if(I(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,i,n){for(var a=[],s=0,o=t.length;s<o;++s)U(t,String(s))?a.push(p(e,t,r,i,String(s),!0)):a.push("");return n.forEach(function(n){n.match(/^\d+$/)||a.push(p(e,t,r,i,n,!0))}),a}function p(e,t,r,i,n,a){var s,o,u;if(u=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},u.get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),U(i,n)||(s="["+n+"]"),o||(e.seen.indexOf(u.value)<0?(o=m(r)?c(e,u.value,null):c(e,u.value,r-1),o.indexOf("\n")>-1&&(o=a?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),y(s)){if(a&&n.match(/^\d+$/))return o;s=JSON.stringify(""+n),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function h(e,t,r){var i=0,n=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function m(e){return null===e}function k(e){return null==e}function g(e){return"number"==typeof e}function I(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function y(e){return void 0===e}function S(e){return P(e)&&"[object RegExp]"===_(e)}function P(e){return"object"==typeof e&&null!==e}function D(e){return P(e)&&"[object Date]"===_(e)}function A(e){return P(e)&&("[object Error]"===_(e)||e instanceof Error)}function C(e){return"function"==typeof e}function b(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var w=/%[sdj%]/g;r.format=function(e){if(!I(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,a=i.length,s=String(e).replace(w,function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),o=i[r];r<a;o=i[++r])s+=m(o)||!P(o)?" "+o:" "+n(o);return s},r.deprecate=function(e,n){function a(){if(!s){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation,s=!0}return e.apply(this,arguments)}if(y(i.process))return function(){return r.deprecate(e,n).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return a};var T,R={};r.debuglog=function(e){if(y(T)&&(T=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(T)){t.pid;R[e]=function(){r.format.apply(r,arguments)}}else R[e]=function(){};return R[e]},r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=v,r.isNull=m,r.isNullOrUndefined=k,r.isNumber=g,r.isString=I,r.isSymbol=E,r.isUndefined=y,r.isRegExp=S,r.isObject=P,r.isDate=D,r.isError=A,r.isFunction=C,r.isPrimitive=b,r.isBuffer=e("./support/isBuffer");r.log=function(){},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!P(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":20,_process:19,inherits:18}],"gatt-ip":[function(e,t,r){t.exports.GATTIP=e("./gattip").GATTIP,t.exports.C=e("./lib/constants").C},{"./gattip":5,"./lib/constants":6}]},{},[]);